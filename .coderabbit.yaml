# CodeRabbit Configuration for Solo Developer
# 1ì¸ ê°œë°œìë¥¼ ìœ„í•œ íš¨ìœ¨ì„± ë° í’ˆì§ˆ ì¤‘ì‹¬ ì„¤ì •

version: "2"

language: "ko-KR" # ë¦¬ë·° ì–¸ì–´ë¥¼ í•œêµ­ì–´ë¡œ ì„¤ì • (í•„ìš”ì‹œ "en-US"ë¡œ ë³€ê²½)
early_access: true # ìµœì‹  ê¸°ëŠ¥ì„ ë¯¸ë¦¬ ì‚¬ìš©í•´ ìƒì‚°ì„± í–¥ìƒ
enable_free_tier: true

reviews:
  profile: "chill" # "assertive"ëŠ” ë„ˆë¬´ ê¹ê¹í•  ìˆ˜ ìˆìœ¼ë¯€ë¡œ "chill"ë¡œ ì„¤ì •í•˜ë˜ íˆ´ì„ í†µí•´ í’ˆì§ˆ ë³´ì¥
  request_changes_workflow: false # 1ì¸ ê°œë°œì´ë¯€ë¡œ ë´‡ì´ ë³‘í•©ì„ ë§‰ì§€ ì•Šë„ë¡ ì„¤ì • (ì¤‘ìš”)
  high_level_summary: true # PR ë‚´ìš©ì„ ìë™ìœ¼ë¡œ ìš”ì•½í•˜ì—¬ íˆìŠ¤í† ë¦¬ ê´€ë¦¬ ìš©ì´
  high_level_summary_in_walkthrough: true # ì›Œí¬ìŠ¤ë£¨(ìƒì„¸ ë¦¬ë·°)ì— ìš”ì•½ í¬í•¨
  auto_title_placeholder: "@coderabbitai" # PR ì œëª© ìë™ ìƒì„± íŠ¸ë¦¬ê±°

  # ì‹œê°í™” ë° ë¬¸ì„œí™” ë„ì›€
  sequence_diagrams: true # ë³µì¡í•œ ë¡œì§ì„ ì‹œí€€ìŠ¤ ë‹¤ì´ì–´ê·¸ë¨ìœ¼ë¡œ ì‹œê°í™” (ë¯¸ë˜ì˜ ë‚˜ë¥¼ ìœ„í•´ ìœ ìš©)
  changed_files_summary: true # ë³€ê²½ëœ íŒŒì¼ ìš”ì•½
  collapse_walkthrough: false # ë¦¬ë·° ë‚´ìš©ì„ ë°”ë¡œ ë³¼ ìˆ˜ ìˆë„ë¡ í¼ì³ë‘ 

  # ì¬ë¯¸ ìš”ì†Œ ì œê±° (íš¨ìœ¨ì„± ì¤‘ì‹¬)
  poem: false
  in_progress_fortune: false

  # ë¼ë²¨ë§ ìë™í™” (ì´ìŠˆ íŠ¸ë˜í‚¹ ìš©ì´)
  suggested_labels: true
  auto_apply_labels: true

  # ì œì™¸í•  íŒŒì¼ë“¤ (ë…¸ì´ì¦ˆ ì œê±°)
  path_filters:
    - "!**/build/**"
    - "!**/gradle/**"
    - "!**/test/**" # í…ŒìŠ¤íŠ¸ ì½”ë“œëŠ” ë¦¬ë·° ìƒëµí•˜ê±°ë‚˜ í•„ìš”ì‹œ ì œê±°
    - "!**/swagger.yaml"
    - "!**/README.md"

  # 1ì¸ ê°œë°œìë¥¼ ìœ„í•œ íŠ¹ë³„ ì§€ì¹¨ (Tone & Style)
  # [í•µì‹¬] ì»¤ìŠ¤í…€ ë¦¬ë·° ê°€ì´ë“œë¼ì¸
  path_instructions:
    # 1. JPA Entity ë° DB ì»¨ë²¤ì…˜ (ì¸í”„ëŸ° ê·œì¹™ì„ Java/JPAì— ë§ê²Œ ë³€í˜•)
    - path: "**/{domain,entity,model}/**/*.java"
      instructions: >
        JPA Entity í´ë˜ìŠ¤ë¥¼ ë¦¬ë·°í•  ë•Œ ë‹¤ìŒ ê·œì¹™ì„ í™•ì¸í•´ì£¼ì„¸ìš”.
        1. **ID íƒ€ì… ê°•ì œ**: `@Id`ê°€ ë¶™ì€ PK í•„ë“œë‚˜, `_id`ë¡œ ëë‚˜ëŠ” ì™¸ë˜í‚¤(FK)ì„± í•„ë“œëŠ” ë°˜ë“œì‹œ `Long` (Wrapper Class) íƒ€ì…ì„ ì‚¬ìš©í•´ì•¼ í•©ë‹ˆë‹¤. `int`, `Integer`ë¥¼ ì‚¬ìš©í–ˆë‹¤ë©´ `Long`ìœ¼ë¡œ ë³€ê²½í•˜ë¼ê³  ê²½ê³ í•´ì£¼ì„¸ìš”.
        2. **FK ì œì•½ì¡°ê±´**: íŒ€ ì»¨ë²¤ì…˜ìƒ ë¬¼ë¦¬ì ì¸ FK ì œì•½ì¡°ê±´(Constraint)ì„ ê±¸ì§€ ì•ŠëŠ” ê²ƒì„ ì„ í˜¸í•©ë‹ˆë‹¤. `@ForeignKey` ì–´ë…¸í…Œì´ì…˜ ì‚¬ìš©ì„ ì œì•ˆí•˜ì§€ ë§ˆì„¸ìš”.
        3. **ê²½ê³  ë©”ì‹œì§€**: ìœ„ ê·œì¹™ ìœ„ë°˜ ì‹œ ê²½ê³  ë©”ì‹œì§€ ì•ì— "ğŸš¨ğŸš¨ğŸš¨ [DB Convention]"ì„ ë¶™ì—¬ì£¼ì„¸ìš”.

    # 2. REST API ì„¤ê³„ ì›ì¹™ (ì¸í”„ëŸ° ê·œì¹™ì„ Spring Boot Controllerì— ì ìš©)
    - path: "**/*Controller.java"
      instructions: >
        Spring Boot Controllerì˜ API ì—”ë“œí¬ì¸íŠ¸ë¥¼ ë‹¤ìŒ ê°€ì´ë“œë¼ì¸ì— ë§ì¶° ë¦¬ë·°í•´ì£¼ì„¸ìš”.
        
        ### Richardson Maturity Model (RMM)
        - ì ì ˆí•œ HTTP ë©”ì„œë“œ(GET, POST, PUT, DELETE, PATCH)ê°€ ì‚¬ìš©ë˜ì—ˆëŠ”ì§€ í™•ì¸í•´ì£¼ì„¸ìš”.
        
        ### URI Naming Convention
        - URIëŠ” **kebab-case**ë¥¼ ì‚¬ìš©í•´ì•¼ í•©ë‹ˆë‹¤. (ì˜ˆ: `/api/v1/user-profiles`)
        - ResourceëŠ” ë³µìˆ˜í˜• ëª…ì‚¬ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤. (ì˜ˆ: `/users` instead of `/user`)
        - URIì— ë™ì‚¬(create, get ë“±)ê°€ í¬í•¨ë˜ì§€ ì•Šë„ë¡ í•©ë‹ˆë‹¤. (ë‹¨, ë³µì¡í•œ ì»¨íŠ¸ë¡¤ëŸ¬ ë¡œì§ì¸ ê²½ìš° ì˜ˆì™¸ í—ˆìš©)
        - Bodyë‚˜ ParameterëŠ” **camelCase**ë¥¼ ì‚¬ìš©í•´ì•¼ í•©ë‹ˆë‹¤.
        
        ### Response Type
        - ë°˜í™˜ íƒ€ì…ì€ í•­ìƒ `ResponseEntity<ApiResponse<T>>` í˜•íƒœì˜ í†µì¼ëœ ì‘ë‹µ í¬ë§·ì„ ê¶Œì¥í•©ë‹ˆë‹¤.
        - ì´ë–„, `HttpResponseUtils` í´ë˜ìŠ¤ë¥¼ í™œìš©í•˜ì—¬ ì¼ê´€ëœ ì‘ë‹µ êµ¬ì¡°ë¥¼ ìœ ì§€í•˜ëŠ”ì§€ í™•ì¸í•´ì£¼ì„¸ìš”.

    # 3. [í”„ë¡œì íŠ¸ íŠ¹í™”] TimeZone ë° Sentry ì„¤ì • (ìš°ë¦¬ê°€ ê²ªì€ ì´ìŠˆ ë°©ì§€)
    - path: "**/*.java"
      instructions: >
        **ì¤‘ìš”: ë‚ ì§œ/ì‹œê°„ ë° ë¡œê¹… ê´€ë ¨ ë¦¬ë·° ê°€ì´ë“œ**
        1. **TimeZone ì´ìŠˆ ë°©ì§€**: `LocalDateTime`ì„ íŒŒë¼ë¯¸í„°ë¡œ ë°›ê±°ë‚˜ ë°˜í™˜í•  ë•Œ, í”„ë¡ íŠ¸ì—”ë“œ(Flutter)ì™€ì˜ ì‹œì°¨ ë¬¸ì œ(+9ì‹œê°„)ê°€ ë°œìƒí•  ê°€ëŠ¥ì„±ì´ ìˆëŠ”ì§€ í™•ì¸í•´ì£¼ì„¸ìš”. ê°€ëŠ¥í•˜ë‹¤ë©´ `OffsetDateTime` ì‚¬ìš©ì„ ê¶Œì¥í•˜ê±°ë‚˜, UTC ì²˜ë¦¬ê°€ ëª…í™•í•œì§€ ë¡œì§ì„ ì ê²€í•´ì£¼ì„¸ìš”.
        2. **Sentry Context**: ì˜ˆì™¸ ì²˜ë¦¬(`catch`) ë¸”ë¡ì´ë‚˜ ì¤‘ìš” ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§(ê²°ì œ, ê³µë¶€ ì¢…ë£Œ ë“±)ì—ì„œ `Sentry.setUser()` ë˜ëŠ” `Sentry.setContext()`ë¥¼ í†µí•´ ë””ë²„ê¹… ì •ë³´ë¥¼ ë‚¨ê¸°ê³  ìˆëŠ”ì§€ í™•ì¸í•´ì£¼ì„¸ìš”. ë‹¨ìˆœíˆ `log.error()`ë§Œ ì°ëŠ” ê²½ìš° Sentry í™œìš©ì„ ì œì•ˆí•´ì£¼ì„¸ìš”.
chat:
  auto_reply: true # ëŒ“ê¸€ì„ ë‹¬ë©´ ì¦‰ì‹œ ë°˜ì‘í•˜ë„ë¡ ì„¤ì •

# ì½”ë“œ ìƒì„± ë° ìë™í™” (1ì¸ ê°œë°œì˜ í•µì‹¬)
code_generation:
  docstrings:
    path_instructions:
      - path: "**/*Controller.java"
        instructions: "Swagger ì–´ë…¸í…Œì´ì…˜(@Operation, @Schema)ì— ë“¤ì–´ê°ˆ ì„¤ëª…ì„ í¬í•¨í•˜ì—¬ JavaDocì„ ì‘ì„±í•´ì£¼ì„¸ìš”."
      - path: "**/*Service.java"
        instructions: "ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì˜ ì˜ˆì™¸ ì¼€ì´ìŠ¤ì™€ íŠ¸ëœì­ì…˜ ë²”ìœ„ë¥¼ ëª…ì‹œí•˜ëŠ” JavaDocì„ ì‘ì„±í•´ì£¼ì„¸ìš”."
  unit_tests:
    path_instructions:
      - path: "**/*Service.java"
        instructions: "JUnit 5ì™€ Mockitoë¥¼ ì‚¬ìš©í•˜ì—¬ ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ ì½”ë“œë¥¼ ì œì•ˆí•´ì£¼ì„¸ìš”. íŠ¹íˆ ë‚ ì§œ ì‹œê°„ ê³„ì‚° ë¡œì§ì— ëŒ€í•œ ì—£ì§€ ì¼€ì´ìŠ¤ë¥¼ í¬í•¨í•´ì£¼ì„¸ìš”."

# ë³‘í•© ì „ ì²´í¬ (ìŠ¤ìŠ¤ë¡œë¥¼ ìœ„í•œ ì•ˆì „ì¥ì¹˜)
# ê²½ê³ (warning)ë§Œ ì£¼ê³  ë³‘í•©ì„ ë§‰ì§€ëŠ” ì•ŠìŒ
pre_merge_checks:
  title:
    mode: "warning"
  description:
    mode: "warning"
  docstrings:
    mode: "warning"
    threshold: 50 # ë¬¸ì„œí™” ì»¤ë²„ë¦¬ì§€ 50% ê¶Œì¥
  issue_assessment:
    mode: "warning" # ì—°ê²°ëœ ì´ìŠˆ í•´ê²° ì—¬ë¶€ í™•ì¸

# íˆ´ ì„¤ì • (ì •ì  ë¶„ì„ ë° ë³´ì•ˆ)
# ì‚¬ìš©í•˜ëŠ” ì–¸ì–´ì— ë§ì¶° í•„ìš”í•œ ê²ƒë§Œ trueë¡œ ìœ ì§€í•´ë„ ë¨
tools:
  # ë³´ì•ˆ í•„ìˆ˜ (í˜¼ì ê°œë°œí•  ë•Œ í‚¤ ìœ ì¶œ ì‹¤ìˆ˜ê°€ ì¦ìŒ)
  gitleaks:
    enabled: true
  osv-scanner: # ì˜ì¡´ì„± ì·¨ì•½ì  ìŠ¤ìº”
    enabled: true

  # Java ì •ì  ë¶„ì„
  pmd:
    enabled: true

  # ì¸í”„ë¼ (Docker)
  hadolint:
    enabled: true # Dockerfile ë¦°íŠ¸
  checkov:
    enabled: true # IaC ë³´ì•ˆ ì ê²€

  # ê¸°íƒ€ ìœ ìš©í•œ íˆ´
  markdownlint:
    enabled: true
  actionlint:
    enabled: true # GitHub Actions ë¦°íŠ¸
  yamllint:
    enabled: true

  # GitHub Checks í†µí•© (PR í•˜ë‹¨ì—ì„œ ìƒíƒœ í™•ì¸ ê°€ëŠ¥)
  github-checks:
    enabled: true
