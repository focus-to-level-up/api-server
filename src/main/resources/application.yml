# application.yml (공통 설정)
spring:
  application:
    name: focus-to-levelup

  profiles:
    active: ${SPRING_PROFILE:local}

  data:
    redis:
      host: ${REDIS_HOST:localhost}
      port: ${REDIS_PORT:6379}

  jpa:
    show-sql: true
    open-in-view: false
    generate-ddl: true
    database-platform: org.hibernate.dialect.MySQLDialect
    defer-datasource-initialization: true
    properties:
      hibernate:
        implicit_naming_strategy: org.hibernate.boot.model.naming.ImplicitNamingStrategyLegacyJpaImpl
        physical_naming_strategy: org.hibernate.boot.model.naming.CamelCaseToUnderscoresNamingStrategy
        hbm2ddl:
          auto: update
        format_sql: true

# JWT 설정
jwt:
  secret: ${JWT_SECRET}

# Apple Sign In 설정
apple:
  client-id: ${APPLE_CLIENT_ID}
  team-id: ${APPLE_TEAM_ID}
  key-id: ${APPLE_KEY_ID}
  private-key: ${APPLE_PRIVATE_KEY}

# Kakao OAuth2 설정
kakao:
  client-id: ${KAKAO_CLIENT_ID}
  client-secret: ${KAKAO_CLIENT_SECRET}

# Naver OAuth2 설정
naver:
  client-id: ${NAVER_CLIENT_ID}
  client-secret: ${NAVER_CLIENT_SECRET}
  redirect-uri: ${NAVER_REDIRECT_URI}

# Google OAuth2 설정
google:
  client-id: ${GOOGLE_CLIENT_ID}
  client-secret: ${GOOGLE_CLIENT_SECRET}
  redirect-uri: ${GOOGLE_REDIRECT_URI}

# RevenueCat 설정 (인앱 결제 - 영수증 검증은 RevenueCat이 처리)
revenuecat:
  enabled: ${REVENUECAT_ENABLED:true}
  api-key:
    apple: ${REVENUECAT_API_KEY_APPLE:}
    google: ${REVENUECAT_API_KEY_GOOGLE:}
  secret-key: ${REVENUECAT_API_KEY:}  # REST API용 Secret Key (sk_...)
  webhook-auth-header: ${REVENUECAT_WEBHOOK_AUTH_HEADER:}  # Optional - 웹훅 인증용
  base-url: https://api.revenuecat.com/v1
  project-id: ${REVENUECAT_PROJECT_ID:}
  entitlement-id:
    premium: ${REVENUECAT_PREMIUM_ENTITLEMENT_ID:premium_subscription}
  free-trial:
    duration: ${REVENUECAT_FREE_TRIAL_DURATION:P14D}  # ISO 8601 기간 형식 (14일)

# Firebase 설정 (사전예약 보상 시스템 - Firestore)
firebase:
  service-account-json: ${FIREBASE_SERVICE_ACCOUNT_JSON}

logging:
  level:
    org:
      springframework:
        web: DEBUG
    com:
      studioedge:
        focus_to_levelup_server:
          global:
            jwt: DEBUG
cloud:
  aws:
    s3:
      bucket: ${AWS_S3_BUCKET}
    credentials:
      access-key: ${AWS_ACCESS_KEY_ID}
      secret-key: ${AWS_SECRET_ACCESS_KEY}
    region:
      static: ${AWS_REGION}
    stack:
      auto: false
